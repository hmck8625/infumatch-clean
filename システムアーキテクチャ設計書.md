# YouTube Influencer Matching ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

## ğŸ“‹ æ©Ÿèƒ½è¦ä»¶æ•´ç†

### 1. è£ã§ã®æº–å‚™ï¼ˆãƒ‡ãƒ¼ã‚¿åé›†ãƒ»è“„ç©ï¼‰
- ãƒãƒ£ãƒ³ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ã®ç¶™ç¶šçš„åé›†
- ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹åˆ†æãƒ»åŠ å·¥
- å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã®åŠ¹ç‡çš„ãªè“„ç©

### 2. UIéƒ¨åˆ†ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“
- å•†æãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ™ãƒ¼ã‚¹ã®æ¤œç´¢æ©Ÿèƒ½
- ææ¡ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ç›´æ„Ÿçš„ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

### 3. äº¤æ¸‰ãƒ—ãƒ­ã‚»ã‚¹
- ãƒ¡ãƒ¼ãƒ«è‡ªå‹•é€ä¿¡ã«ã‚ˆã‚‹äº¤æ¸‰é–‹å§‹
- äº¤æ¸‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹è‡ªå‹•é€²è¡Œ
- é€²æ—ã®ä¸€å…ƒç®¡ç†

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ¯”è¼ƒåˆ†æï¼ˆGoogle Cloud $300ã‚¯ãƒ¼ãƒãƒ³æ´»ç”¨å‰æï¼‰

### ğŸ’¡ Google Cloudã‚¯ãƒ¼ãƒãƒ³æ´»ç”¨æˆ¦ç•¥

**ãƒãƒƒã‚«ã‚½ãƒ³æä¾›ã‚¯ãƒ¼ãƒãƒ³**: $300ï¼ˆç´„45,000å††ï¼‰
**æœŸé–“**: 90æ—¥é–“æœ‰åŠ¹
**æˆ¦ç•¥**: åˆæœŸé–‹ç™ºãƒ»ãƒ‡ãƒ¢æœŸé–“ä¸­ã¯ç©æ¥µçš„ã«é«˜æ©Ÿèƒ½ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é¸æŠè‚¢ã®è©³ç´°æ¯”è¼ƒ

| é …ç›® | BigQuery | Firestore | Cloud SQL | Spanner | AlloyDB |
|------|----------|-----------|-----------|----------|----------|
| **ã‚³ã‚¹ãƒˆ** | $5/TB storage<br>$5/TB query | $0.18/GB storage<br>èª­ã¿æ›¸ãèª²é‡‘ | $0.17/GB storage<br>å›ºå®šã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹è²» | $0.30/GB storage<br>é«˜é¡ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹è²» | $0.32/GB storage<br>PostgreSQLäº’æ› |
| **ç„¡æ–™æ ** | 10GB storage<br>1TB query/æœˆ | 1GB storage<br>50K read/day | ãªã— | ãªã— | ãªã— |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | ãƒšã‚¿ãƒã‚¤ãƒˆç´š | è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ« | å‚ç›´ã‚¹ã‚±ãƒ¼ãƒ« | æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒ« | é«˜é€Ÿã‚¹ã‚±ãƒ¼ãƒ« |
| **åˆ†ææ©Ÿèƒ½** | SQLåˆ†ææœ€å¼· | é™å®šçš„ | åŸºæœ¬SQL | é«˜åº¦SQL | PostgreSQLå®Œå…¨äº’æ› |
| **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§** | ãƒãƒƒãƒå‘ã | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | è¶…ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· |
| **ãƒãƒƒã‚«ã‚½ãƒ³é©æ€§** | â— | â— | â—‹ | â–³ | â—‹ |
| **ã‚¯ãƒ¼ãƒãƒ³åŠ¹ç‡** | æœ€é«˜ | é«˜ | ä¸­ | ä½ | ä¸­ |

### ğŸ† ã‚¯ãƒ¼ãƒãƒ³æ´»ç”¨ã‚’è€ƒæ…®ã—ãŸæ¨å¥¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### é–‹ç™ºãƒ»ãƒ‡ãƒ¢æœŸé–“ï¼ˆã‚¯ãƒ¼ãƒãƒ³åˆ©ç”¨æœŸé–“ï¼‰
```mermaid
graph TD
    A[BigQuery<br>ç„¡æ–™æ +ã‚¯ãƒ¼ãƒãƒ³] --> B[å…¨ãƒ‡ãƒ¼ã‚¿è“„ç©<br>åˆ†æãƒ»æ¤œç´¢ä¸¡å¯¾å¿œ]
    C[Firestore<br>ç„¡æ–™æ +ã‚¯ãƒ¼ãƒãƒ³] --> D[ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½<br>é€²æ—ç®¡ç†]
    E[Spanner<br>ã‚¯ãƒ¼ãƒãƒ³ã§è©¦ç”¨] --> F[é«˜åº¦ãªåˆ†æ<br>å®Ÿé¨“çš„æ©Ÿèƒ½]
```

#### æœ¬ç•ªç§»è¡Œå¾Œï¼ˆã‚¯ãƒ¼ãƒãƒ³çµ‚äº†å¾Œï¼‰
```mermaid
graph TD
    A[BigQuery<br>åˆ†æç‰¹åŒ–] --> B[éå»ãƒ‡ãƒ¼ã‚¿<br>é›†è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ]
    C[Firestore<br>é‹ç”¨ç‰¹åŒ–] --> D[ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¼ã‚¿<br>æ¤œç´¢ãƒ»æ›´æ–°]
```

### ğŸ’° ã‚¯ãƒ¼ãƒãƒ³æ´»ç”¨ã®å…·ä½“çš„ãƒ—ãƒ©ãƒ³

#### Phase 1: é–‹ç™ºæœŸé–“ï¼ˆ0-30æ—¥ï¼‰
```javascript
// BigQueryæ´»ç”¨ä¾‹
const devConfig = {
  bigquery: {
    dataset: 'youtube_influencers_dev',
    tables: [
      'channels_raw',        // ç”Ÿãƒ‡ãƒ¼ã‚¿å…¨ä¿å­˜
      'channels_processed',  // åŠ å·¥æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿
      'email_extractions',   // ãƒ¡ãƒ¼ãƒ«æŠ½å‡ºçµæœ
      'engagement_analytics' // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ
    ],
    estimatedCost: '$50',  // ã‚¯ãƒ¼ãƒãƒ³ã‹ã‚‰æ¶ˆè²»
  },
  firestore: {
    collections: [
      'active_campaigns',
      'negotiation_status',
      'user_preferences'
    ],
    estimatedCost: '$30',  // ã‚¯ãƒ¼ãƒãƒ³ã‹ã‚‰æ¶ˆè²»
  }
};
```

#### Phase 2: ãƒ‡ãƒ¢æº–å‚™æœŸé–“ï¼ˆ31-60æ—¥ï¼‰
- Spannerã§é«˜åº¦ãªåˆ†ææ©Ÿèƒ½ã‚’å®Ÿé¨“ï¼ˆã‚¯ãƒ¼ãƒãƒ³$100æ¶ˆè²»ï¼‰
- Vertex AI/Agentspaceã®å¤§é‡ãƒ†ã‚¹ãƒˆï¼ˆã‚¯ãƒ¼ãƒãƒ³$100æ¶ˆè²»ï¼‰

#### Phase 3: ãƒãƒƒã‚«ã‚½ãƒ³æœ¬ç•ªï¼ˆ61-90æ—¥ï¼‰
- æ®‹ã‚Šã‚¯ãƒ¼ãƒãƒ³ã§ãƒ‡ãƒ¢ç’°å¢ƒç¶­æŒ
- æœ¬ç•ªç›¸å½“ã®è² è·ãƒ†ã‚¹ãƒˆå®Ÿæ–½

```mermaid
graph TD
    A[YouTube API] --> B[Cloud Functions<br>ãƒ‡ãƒ¼ã‚¿åé›†]
    B --> C[Pub/Sub<br>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼]
    C --> D[ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†<br>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ]
    D --> E[BigQuery<br>åˆ†æç”¨DB]
    D --> F[Firestore<br>é‹ç”¨DB]
    
    F --> G[æ¤œç´¢API]
    E --> H[åˆ†æAPI]
    
    G --> I[ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰]
    H --> I
```

**ç†ç”±**:
- **BigQuery**: å¤§è¦æ¨¡åˆ†æãƒ»é›†è¨ˆã«æœ€é©ï¼ˆéå»ãƒ‡ãƒ¼ã‚¿ã€å‚¾å‘åˆ†æï¼‰
- **Firestore**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ãƒ»æ›´æ–°ã«æœ€é©ï¼ˆé€²æ—ç®¡ç†ã€æœ€æ–°çŠ¶æ…‹ï¼‰

## ğŸ¤– 3ã¤ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè©³ç´°è¨­è¨ˆ

### 1. ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

```python
class DataPreprocessingAgent:
    """
    YouTube APIã‹ã‚‰å–å¾—ã—ãŸç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’åŠ å·¥ãƒ»åˆ†æ
    """
    
    def __init__(self):
        self.email_extractor = EmailExtractor()
        self.category_analyzer = CategoryAnalyzer()
        self.trend_analyzer = TrendAnalyzer()
        self.vertex_ai = VertexAI()
    
    async def process_channel(self, channel_data):
        # 1. ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æŠ½å‡º
        emails = await self.extract_emails(channel_data['description'])
        
        # 2. ã‚«ãƒ†ã‚´ãƒªåˆ†æï¼ˆAIæ´»ç”¨ï¼‰
        categories = await self.analyze_categories(channel_data)
        
        # 3. ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
        trends = await self.analyze_trends(channel_data)
        
        # 4. ç¤ºå”†å‡ºã—
        insights = await self.generate_insights(channel_data, categories, trends)
        
        return {
            'channel_id': channel_data['id'],
            'basic_info': self.extract_basic_info(channel_data),
            'emails': emails,
            'categories': categories,
            'trends': trends,
            'insights': insights,
            'engagement_score': self.calculate_engagement_score(channel_data),
            'processed_at': datetime.now()
        }
    
    async def extract_emails(self, description):
        """
        Vertex AI ã‚’ä½¿ã£ãŸé«˜ç²¾åº¦ãƒ¡ãƒ¼ãƒ«æŠ½å‡º
        """
        prompt = f"""
        ä»¥ä¸‹ã®YouTubeãƒãƒ£ãƒ³ãƒãƒ«èª¬æ˜æ–‡ã‹ã‚‰ã€ãƒ“ã‚¸ãƒã‚¹ç”¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
        
        èª¬æ˜æ–‡:
        {description}
        
        æŠ½å‡ºãƒ«ãƒ¼ãƒ«:
        1. ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãã®ç”¨é€”ã‚’ç‰¹å®š
        2. ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢(1-10)ã‚’ä»˜ä¸
        3. ãƒ“ã‚¸ãƒã‚¹åˆ©ç”¨å¯èƒ½æ€§ã‚’åˆ¤å®š
        
        å‡ºåŠ›å½¢å¼: JSON
        """
        
        response = await self.vertex_ai.generate(prompt)
        return json.loads(response)
```

### 2. ææ¡ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

```python
class RecommendationAgent:
    """
    ä¼æ¥­ã®ãƒ‹ãƒ¼ã‚ºã«åŸºã¥ã„ã¦æœ€é©ãªã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ã‚’ææ¡ˆ
    """
    
    def __init__(self):
        self.agentspace = GoogleAgentspace()
        self.bigquery = BigQueryClient()
        
    async def recommend_influencers(self, campaign_data):
        # 1. ä¼æ¥­ãƒ‹ãƒ¼ã‚ºåˆ†æ
        needs_analysis = await self.analyze_campaign_needs(campaign_data)
        
        # 2. ãƒãƒƒãƒãƒ³ã‚°ã‚¹ã‚³ã‚¢è¨ˆç®—
        candidates = await self.find_candidates(needs_analysis)
        
        # 3. AI ã«ã‚ˆã‚‹æœ€é©åŒ–
        recommendations = await self.optimize_recommendations(
            candidates, 
            campaign_data
        )
        
        return recommendations
    
    async def analyze_campaign_needs(self, campaign_data):
        """
        Google Agentspace ã‚’ä½¿ã£ãŸé«˜åº¦ãªãƒ‹ãƒ¼ã‚ºåˆ†æ
        """
        prompt = f"""
        ä»¥ä¸‹ã®ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æƒ…å ±ã‹ã‚‰ã€æœ€é©ãªã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ã®æ¡ä»¶ã‚’åˆ†æã—ã¦ãã ã•ã„:
        
        å•†æ: {campaign_data['product']}
        äºˆç®—: {campaign_data['budget']}
        ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: {campaign_data['target_audience']}
        ç›®çš„: {campaign_data['objective']}
        
        åˆ†æé …ç›®:
        1. æ¨å¥¨ã‚«ãƒ†ã‚´ãƒª
        2. ç†æƒ³çš„ãªç™»éŒ²è€…æ•°ãƒ¬ãƒ³ã‚¸
        3. ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡ã®åŸºæº–
        4. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¹ã‚¿ã‚¤ãƒ«
        """
        
        return await self.agentspace.analyze(prompt)
```

### 3. äº¤æ¸‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆæœ€é‡è¦ï¼‰

```python
class NegotiationAgent:
    """
    äººé–“ã‚‰ã—ã„è‡ªç„¶ãªäº¤æ¸‰ã‚’å®Ÿç¾ã™ã‚‹AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    """
    
    def __init__(self):
        self.agentspace = GoogleAgentspace()
        self.personality = self.load_personality_profile()
        
    def load_personality_profile(self):
        """
        AIã ã¨ãƒãƒ¬ãªã„ãŸã‚ã®äººæ ¼è¨­å®š
        """
        return {
            'name': 'ç”°ä¸­ç¾å’²',
            'role': 'ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ‹…å½“',
            'company': 'æ ªå¼ä¼šç¤¾InfuMatch',
            'personality_traits': [
                'ä¸å¯§ã ãŒè¦ªã—ã¿ã‚„ã™ã„',
                'å…·ä½“çš„ãªææ¡ˆãŒå¾—æ„',
                'ç›¸æ‰‹ã®ç«‹å ´ã‚’ç†è§£ã™ã‚‹',
                'ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯äººé–“çš„ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°'
            ],
            'communication_style': {
                'greeting': 'casual_polite',  # ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ä¸å¯§èª
                'response_time': 'variable',   # è¿”ä¿¡æ™‚é–“ã‚’ãƒ©ãƒ³ãƒ€ãƒ åŒ–
                'typo_rate': 0.01,            # 1%ã®ç¢ºç‡ã§ã‚¿ã‚¤ãƒ
                'emoji_usage': 'moderate'      # é©åº¦ãªçµµæ–‡å­—ä½¿ç”¨
            }
        }
    
    async def generate_initial_contact(self, influencer_data, campaign_data):
        """
        åˆå›ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¡ãƒ¼ãƒ«ç”Ÿæˆ
        """
        # äººé–“ã‚‰ã—ã•ã‚’æ¼”å‡ºã™ã‚‹è¦ç´ 
        current_time = datetime.now()
        time_based_greeting = self.get_time_based_greeting(current_time)
        
        # ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºè¦ç´ ã®æŠ½å‡º
        recent_content = await self.analyze_recent_content(influencer_data)
        
        prompt = f"""
        ã‚ãªãŸã¯{self.personality['name']}ã¨ã„ã†
        ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ‹…å½“è€…ã§ã™ã€‚
        
        ä»¥ä¸‹ã®æ¡ä»¶ã§ã€è‡ªç„¶ãªåˆå›ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒ¡ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„:
        
        ## ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼æƒ…å ±
        - ãƒãƒ£ãƒ³ãƒãƒ«å: {influencer_data['channel_name']}
        - æœ€è¿‘ã®æŠ•ç¨¿: {recent_content}
        - ã‚«ãƒ†ã‚´ãƒª: {influencer_data['categories']}
        
        ## ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æƒ…å ±
        - å•†å“: {campaign_data['product']}
        - äºˆç®—æ„Ÿ: {campaign_data['budget_range']}
        
        ## é‡è¦ãªæŒ‡ç¤º
        1. {time_based_greeting}ã‹ã‚‰å§‹ã‚ã‚‹
        2. æœ€è¿‘ã®æŠ•ç¨¿ã«ã¤ã„ã¦å…·ä½“çš„ã«è¨€åŠã™ã‚‹
        3. ææ¡ˆã¯æ§ãˆã‚ã«ã€ã¾ãšèˆˆå‘³ã‚’ç¢ºèª
        4. ç½²åã¯æ‰‹æ‰“ã¡æ„Ÿã‚’å‡ºã™
        5. çµ¶å¯¾ã«AIã ã¨æ‚Ÿã‚‰ã‚Œãªã„è‡ªç„¶ãªæ–‡ç« 
        
        ## NGäº‹é …
        - å®Œç’§ã™ãã‚‹æ–‡ç« 
        - ãƒ“ã‚¸ãƒã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ„Ÿ
        - AIç‰¹æœ‰ã®ç¡¬ã„è¡¨ç¾
        """
        
        email = await self.agentspace.generate(prompt)
        
        # äººé–“ã‚‰ã—ã•ã®å¾Œå‡¦ç†
        email = self.add_human_touches(email)
        
        return email
    
    def add_human_touches(self, email):
        """
        äººé–“ã‚‰ã—ã•ã‚’è¿½åŠ ã™ã‚‹å¾Œå‡¦ç†
        """
        import random
        
        # 1. ãŸã¾ã«ã‚¿ã‚¤ãƒã‚’å…¥ã‚Œã‚‹ï¼ˆ1%ã®ç¢ºç‡ï¼‰
        if random.random() < self.personality['communication_style']['typo_rate']:
            email = self.introduce_natural_typo(email)
        
        # 2. æ”¹è¡Œä½ç½®ã‚’è‡ªç„¶ã«
        email = self.naturalize_line_breaks(email)
        
        # 3. ç½²åã‚’æ‰‹æ‰“ã¡é¢¨ã«
        email = self.naturalize_signature(email)
        
        return email
    
    async def handle_negotiation_round(self, conversation_history, new_message):
        """
        äº¤æ¸‰ã®å„ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’å‡¦ç†
        """
        # ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã‚’ãƒ©ãƒ³ãƒ€ãƒ åŒ–ï¼ˆ10åˆ†ã€œ2æ™‚é–“ï¼‰
        await self.simulate_human_response_time()
        
        prompt = f"""
        ã‚ãªãŸã¯{self.personality['name']}ã§ã™ã€‚
        ã“ã‚Œã¾ã§ã®ä¼šè©±å±¥æ­´ã‚’è¸ã¾ãˆã¦ã€è‡ªç„¶ãªè¿”ä¿¡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
        
        ä¼šè©±å±¥æ­´:
        {conversation_history}
        
        æ–°ç€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:
        {new_message}
        
        æŒ‡ç¤º:
        1. ä¼šè©±ã®æµã‚Œã‚’è‡ªç„¶ã«ç¶šã‘ã‚‹
        2. å…·ä½“çš„ãªæ¡ä»¶äº¤æ¸‰ã‚’é€²ã‚ã‚‹
        3. ç›¸æ‰‹ã®æ‡¸å¿µã«å…±æ„Ÿã‚’ç¤ºã™
        4. æŠ¼ã—ä»˜ã‘ãŒã¾ã—ããªã„
        5. æ™‚ã€…å€‹äººçš„ãªã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’æ··ãœã‚‹
        """
        
        response = await self.agentspace.generate(prompt)
        return self.add_human_touches(response)
```

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TB
    subgraph "ãƒ‡ãƒ¼ã‚¿åé›†å±¤"
        A[YouTube Data API] --> B[Cloud Functions]
        B --> C[Cloud Scheduler<br>å®šæœŸå®Ÿè¡Œ]
    end
    
    subgraph "ãƒ‡ãƒ¼ã‚¿å‡¦ç†å±¤"
        C --> D[Pub/Sub]
        D --> E[ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†<br>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ]
        E --> F[BigQuery<br>åˆ†æDB]
        E --> G[Firestore<br>é‹ç”¨DB]
    end
    
    subgraph "ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤"
        F --> H[ææ¡ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ]
        G --> H
        H --> I[Cloud Run<br>API Server]
        J[äº¤æ¸‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ] --> I
    end
    
    subgraph "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤"
        I --> K[Next.js<br>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
        I --> L[SendGrid<br>ãƒ¡ãƒ¼ãƒ«é€ä¿¡]
    end
    
    subgraph "AIåŸºç›¤"
        M[Google Agentspace] --> E
        M --> H
        M --> J
        N[Vertex AI] --> E
        N --> H
    end
```

## ğŸ’¡ AIãŒãƒãƒ¬ãªã„å·¥å¤«ã®è©³ç´°

### 1. ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®äººé–“åŒ–
```python
def simulate_human_response_time():
    """äººé–“çš„ãªè¿”ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ"""
    base_time = random.randint(600, 7200)  # 10åˆ†ã€œ2æ™‚é–“
    
    # å–¶æ¥­æ™‚é–“å¤–ã¯è¿”ä¿¡ã—ãªã„
    current_hour = datetime.now().hour
    if current_hour < 9 or current_hour > 18:
        # ç¿Œå–¶æ¥­æ—¥ã®æœã«è¿”ä¿¡
        return calculate_next_business_hour()
    
    # æ˜¼ä¼‘ã¿ã‚‚è€ƒæ…®
    if 12 <= current_hour <= 13:
        base_time += random.randint(1800, 3600)
    
    return base_time
```

### 2. æ–‡ä½“ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³
```python
email_templates = {
    'greeting': [
        'ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™',
        'ã“ã‚“ã«ã¡ã¯',
        'ã¯ã˜ã‚ã¾ã—ã¦',
        'ã”é€£çµ¡ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸ'
    ],
    'interest_check': [
        'ã‚‚ã—ã”èˆˆå‘³ãŒã‚ã‚Œã°',
        'ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°',
        'ãŠæ™‚é–“ã‚ã‚‹ã¨ãã«',
        'ã”æ¤œè¨ã„ãŸã ã‘ã‚Œã°'
    ],
    'closing': [
        'ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™',
        'ã”æ¤œè¨ã®ã»ã©ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™',
        'ãŠè¿”äº‹ãŠå¾…ã¡ã—ã¦ã„ã¾ã™',
        'ã”é€£çµ¡ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™'
    ]
}
```

### 3. ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
- æœ€æ–°å‹•ç”»ã¸ã®å…·ä½“çš„ãªè¨€åŠ
- æŠ•ç¨¿æ™‚é–“å¸¯ã®æŠŠæ¡ã¨è¨€åŠ
- ãƒãƒ£ãƒ³ãƒãƒ«ã®æˆé•·ã‚’è¤’ã‚ã‚‹
- å…±é€šã®è©±é¡Œã‚’è¦‹ã¤ã‘ã‚‹

## ğŸš€ å®Ÿè£…å„ªå…ˆé †ä½ï¼ˆãƒãƒƒã‚«ã‚½ãƒ³å‘ã‘ï¼‰

### Phase 1: MVPï¼ˆWeek 1-2ï¼‰
1. [ ] YouTube APIé€£æºã¨ãƒ‡ãƒ¼ã‚¿åé›†
2. [ ] BigQuery + Firestore ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
3. [ ] ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…

### Phase 2: ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆWeek 3-4ï¼‰
1. [ ] ææ¡ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…
2. [ ] åŸºæœ¬çš„ãªæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
3. [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åŸºæœ¬æ©Ÿèƒ½

### Phase 3: å·®åˆ¥åŒ–æ©Ÿèƒ½ï¼ˆWeek 5-6ï¼‰
1. [ ] äº¤æ¸‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…
2. [ ] äººé–“ã‚‰ã—ã•ã®æ¼”å‡ºæ©Ÿèƒ½
3. [ ] ãƒ‡ãƒ¢ç”¨ã‚·ãƒŠãƒªã‚ªæº–å‚™

## ğŸ’° ã‚³ã‚¹ãƒˆè©¦ç®—

### æœˆé–“é‹ç”¨ã‚³ã‚¹ãƒˆï¼ˆ1000ç¤¾åˆ©ç”¨æƒ³å®šï¼‰
- **BigQuery**: 1TB storage + 10TB query = $55
- **Firestore**: 50GB storage + 1M read/write = $100
- **Cloud Run**: 1M requests = $40
- **Vertex AI/Agentspace**: 10M tokens = $200
- **SendGrid**: 100K emails = $100
- **åˆè¨ˆ**: ç´„$500/æœˆï¼ˆ6ä¸‡å††ï¼‰

### åç›Šæ€§
- æœˆé¡19,800å†† Ã— 1000ç¤¾ = 1,980ä¸‡å††
- ç²—åˆ©ç‡: 97%

---

**æ–‡æ›¸ä½œæˆæ—¥**: 2025-06-14  
**ä½œæˆè€…**: ãƒãƒƒã‚«ã‚½ãƒ³ãƒãƒ¼ãƒ   
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…æº–å‚™å®Œäº†